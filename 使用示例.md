# 使用示例

## 基本使用

### 1. 单次分析（使用手动价格）

```bash
node goldWaveAnalysis.js --price 5000
```

输出示例：
```
📊 黄金波浪理论实时分析报告（多周期分析）
💰 当前价格: 5000
📈 波浪结构: (基于1小时K线推理)
   第一浪: 4299.01 → 4850.51 (涨幅: 551.50)
   第二浪: 4850.51 → 进行中 (当前低点: 4753.79)
📊 趋势状态: 第二浪可能结束
🎯 下一个目标位: 5023 - 0.382反弹位 (距离23.00点)
```

### 2. 推理周期（1小时 / 4小时 / 日线）

```bash
# 默认 1 小时
node goldWaveAnalysis.js --price 4820

# 4 小时推理（适合中短期）
node goldWaveAnalysis.js --price 4820 --timeframe 4h

# 日线推理（适合宏观趋势）
node goldWaveAnalysis.js --price 4820 --timeframe d1
```

### 3. 时间范围推理

```bash
# 指定起始时间（至最新）
node goldWaveAnalysis.js --price 4820 --from "2026-01-22 16:00:00"

# 指定起止时间
node goldWaveAnalysis.js --price 4820 --from "2025-06-01 00:00:00" --to "2026-01-15 23:59:59"

# 使用 --range
node goldWaveAnalysis.js --price 4820 --range "2025-06-01 00:00:00" "2026-01-15 23:59:59"
```

### 4. 波浪点位模式

```bash
# 识别推动浪 1-2-3-4-5 和调整浪 a-b-c
node goldWaveAnalysis.js --wave

# 波浪模式 + 4 小时
node goldWaveAnalysis.js --wave --timeframe 4h

# 波浪模式 + 时间范围
node goldWaveAnalysis.js --wave --from "2025-11-01 00:00:00"
```

### 5. 定时监控模式

```bash
# 每5分钟自动分析一次
node goldWaveAnalysis.js --watch

# 每10分钟分析一次
node goldWaveAnalysis.js --watch --interval 10

# 定时监控 + 手动价格
node goldWaveAnalysis.js --watch --price 5000 --interval 5
```

### 6. 使用环境变量

```bash
# Linux/Mac
GOLD_PRICE=5000 node goldWaveAnalysis.js

# Windows PowerShell
$env:GOLD_PRICE=5000; node goldWaveAnalysis.js

# Windows CMD
set GOLD_PRICE=5000 && node goldWaveAnalysis.js
```

## 实际应用场景

### 场景1：实时监控黄金价格走势

```bash
# 启动定时监控，每5分钟分析一次
node goldWaveAnalysis.js --watch --interval 5
```

脚本会：
- 每5分钟获取一次实时价格
- 自动计算关键点位
- 判断趋势状态
- 输出分析报告

### 场景2：分析特定价格点位

```bash
# 分析价格5000的情况
node goldWaveAnalysis.js --price 5000

# 分析价格5100的情况
node goldWaveAnalysis.js --price 5100

# 分析价格4800的情况
node goldWaveAnalysis.js --price 4800
```

### 场景3：集成到其他系统

```javascript
// 在其他Node.js项目中引入
const { analyzeWave2, inferWaveStructure, judgeTrend } = require('./goldWaveAnalysis');

// 使用自定义价格进行分析（需先加载 K 线数据）
const currentPrice = 5000;
const waveStructure = inferWaveStructure(klineData);
const analysis = analyzeWave2(currentPrice, waveStructure);
const trend = judgeTrend(currentPrice, analysis);

console.log('趋势:', trend.trend);
console.log('建议:', trend.action);
console.log('下一个目标:', trend.immediateTarget);
```

### 场景4：多周期对比分析

```bash
# 分别用 1 小时、4 小时、日线推理，对比不同周期结论
node goldWaveAnalysis.js --price 4820
node goldWaveAnalysis.js --price 4820 --timeframe 4h
node goldWaveAnalysis.js --price 4820 --timeframe d1
```

### 场景5：指定时间段复盘

```bash
# 仅用 2025 年 6 月到 2026 年 1 月的数据做推理
node goldWaveAnalysis.js --price 4820 --from "2025-06-01 00:00:00" --to "2026-01-15 23:59:59"
```

## 输出解读

### 趋势状态说明（5 档）

- **第三浪上涨**：突破第一浪终点
- **第二浪可能结束**：突破(v)浪高点，可能进入第三浪
- **调整中**：在(iv)浪低点和(v)浪高点之间
- **深度调整**：跌破(iv)浪低点，但未破 Y 浪低点
- **关键区域**：接近蓝线 0.8 位置，需密切关注
- **危险区域**：跌破蓝线 0.8 位置，第二浪可能延伸

### 监测点说明（算法衍生）

- **生命线（蓝线 0.8）**：0.8 回撤位，不可跌破
- **第二浪低点(Y)**：当前第二浪低点
- **(iv)浪低点**：0.236 反弹位近似
- **(v)浪高点**：0.5 反弹位近似，突破则第二浪可能结束

### 关键点位说明

关键点位按价格从低到高排序，显示：
- 点位价格
- 点位说明（如"Y浪0.382反弹位"）
- 是否已突破（✅/⏳）
- 距离当前价格的距离

## 命令行参数速查

| 参数 | 简写 | 说明 |
|------|------|------|
| `--price` | `-p` | 手动输入价格 |
| `--timeframe` | `-T` | 推理周期：h1 / 4h / d1 |
| `--from` | `-f` | 时间范围起始 |
| `--to` | `-t` | 时间范围结束 |
| `--range` | `-r` | 时间范围（起 [止]） |
| `--watch` | `-w` | 定时监控 |
| `--wave` | `-W` | 波浪点位模式 |
| `--cost-usd` | - | 持仓成本价（USD） |
| `--amount-cny` | - | 持仓金额（CNY） |

## 注意事项

1. **API配置**：默认使用 jijinhao.com API，失败时需手动输入价格
2. **价格单位**：脚本假设价格为 USD/盎司（如 4820 表示 4820 美元/盎司）
3. **时间周期**：支持 1 小时、4 小时、日线，建议结合多个周期验证
4. **风险提示**：技术分析仅为概率推演，不构成交易建议

## 故障排查

### 问题1：API获取失败

**现象**：显示"使用模拟价格5000"

**解决方案**：
1. 使用手动价格：`node goldWaveAnalysis.js --price <价格>`
2. 配置环境变量：`GOLD_PRICE=<价格> node goldWaveAnalysis.js`
3. 修改代码添加真实的API源

### 问题2：输出格式异常

**检查**：
- Node.js版本 >= 12.0.0
- 脚本文件编码为UTF-8

### 问题3：定时模式不工作

**检查**：
- 确保使用 `--watch` 参数
- 检查系统时间是否正确
- 查看控制台是否有错误信息
